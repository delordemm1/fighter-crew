import{S as q,i as y,s as C,e as c,f as k,p as N,b,j as s,l as I,q as S,n as T,d as w,u as O,o as $}from"./main-37d9c842.js";function j(n,e,r){const i=n.slice();return i[3]=e[r],i}function H(n){let e,r,i=n[3].id+"",f,m,d,u=n[3].name+"",A,p,g,_=n[3].email+"",E,v,L,M=n[3].age+"",h,l;return{c(){e=c("tr"),r=c("td"),f=N(i),m=k(),d=c("td"),A=N(u),p=k(),g=c("td"),E=N(_),v=k(),L=c("td"),h=N(M),l=k()},m(t,o){b(t,e,o),s(e,r),s(r,f),s(e,m),s(e,d),s(d,A),s(e,p),s(e,g),s(g,E),s(e,v),s(e,L),s(L,h),s(e,l)},p(t,o){o&1&&i!==(i=t[3].id+"")&&S(f,i),o&1&&u!==(u=t[3].name+"")&&S(A,u),o&1&&_!==(_=t[3].email+"")&&S(E,_),o&1&&M!==(M=t[3].age+"")&&S(h,M)},d(t){t&&w(e)}}}function B(n){let e,r,i,f,m,d,u,A,p,g,_,E,v,L,M,h=n[0],l=[];for(let t=0;t<h.length;t+=1)l[t]=H(j(n,h,t));return{c(){e=c("div"),e.innerHTML="<h2>ADMIN DASHBOARD</h2>",r=k(),i=c("div"),f=c("table"),m=c("thead"),m.innerHTML=`<tr><th>S/N</th> 
				<th>NAME</th> 
				<th>EMAIL</th> 
				<th>AGE</th></tr>`,d=k(),u=c("tbody");for(let t=0;t<l.length;t+=1)l[t].c();A=k(),p=c("div"),g=N("Total Entries: "),_=N(n[1]),E=k(),v=c("button"),v.textContent="Logout"},m(t,o){b(t,e,o),b(t,r,o),b(t,i,o),s(i,f),s(f,m),s(f,d),s(f,u);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(u,null);b(t,A,o),b(t,p,o),s(p,g),s(p,_),b(t,E,o),b(t,v,o),L||(M=I(v,"click",F),L=!0)},p(t,[o]){if(o&1){h=t[0];let a;for(a=0;a<h.length;a+=1){const D=j(t,h,a);l[a]?l[a].p(D,o):(l[a]=H(D),l[a].c(),l[a].m(u,null))}for(;a<l.length;a+=1)l[a].d(1);l.length=h.length}o&2&&S(_,t[1])},i:T,o:T,d(t){t&&w(e),t&&w(r),t&&w(i),O(l,t),t&&w(A),t&&w(p),t&&w(E),t&&w(v),L=!1,M()}}}async function F(){try{const n=await fetch("/api/admin/logout",{method:"POST"});if(n.ok){const e=await n.json();console.log(e),e.message==="success"&&(window.location.href="/admin/login")}else console.error("Logout failed")}catch(n){console.error("Network error:",n)}}function G(n,e,r){let i=[],f=0;async function m(){try{const d=await fetch("/api/users");if(d.ok){const u=await d.json();r(0,i=u.users),r(1,f=u.totalEntries)}else console.error("Failed to fetch data")}catch(d){console.error("Network error:",d)}}return $(m),[i,f]}class R extends q{constructor(e){super(),y(this,e,G,B,C,{})}}export{R as default};
